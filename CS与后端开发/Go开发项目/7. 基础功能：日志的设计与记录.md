在开发完应用框架之后，还需要优先确定应用应该如何记录日志，因为接下来的开发可能随时需要记录日志。应用出故障，需要快速定位问题，这些都依赖于日志。

# 如何记录日志

## 用什么方式
- 通过开源日志包
- 基于开源日志包封装一个满足特定需求的日志包
- 根据需求从0开发一个日志包

## 如何记录
遵循制定的日志规范，调用日志包提供的方法记录日志。
[日志规范](https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fmarmotedu%2Fminiblog%2Fblob%2Fmaster%2Fdocs%2Fdevel%2Fzh-CN%2Fconversions%2Flogging.md "https://github.com/marmotedu/miniblog/blob/master/docs/devel/zh-CN/conversions/logging.md")

## 如何保存
- **标准输出：** 开发测试时经常用到，主要是方便。
    
- **日志文件：** 生产环境部署时最常见的方式，保存的日志可能后续会被 Filebeat、Fluentd 这类日志采集组件采集，并保存到 Elasticsearch；
    
- **消息中间件：** 例如 kafka。日志包会直接通过调用 API 接口的形式，将日志保存在 kafka 中，为了提高性能，通常有个异步任务队列，异步保存。这种情况下，异步上报逻辑需要开发，重启服务日志可能会丢失，所以这种方式很少采用。

**如果你的应用采用容器化部署，其实更建议将日志输出到标准输出。容器平台一般都具有采集容器日志的能力。采集日志时，可以选择从标准输出采集或者容器中的日志文件采集，如果是从日志文件进行采集，通常需要配置日志采集路径，但如果是从标准输出采集，则不用。所以，如果将日志直接输出到标准输出，则可以不加配置直接复用容器平台已有的能力，做到记录日志和采集日志完全解耦。**