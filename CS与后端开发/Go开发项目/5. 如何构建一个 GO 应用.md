# 合格应用代码应该满足的特征

- 结构清晰
	- 有利于阅读
	- 减少后期Bug
- 按功能隔离
	- 后期代码变更不会相互影响
- 代码具有扩展性
	- 清晰了解哪里添加新功能代码
	- 保证整个应用框架逻辑一致
---
# 应用程序的组成部分

## 配置
通过配置，指定应用需要连接的 MySQL 地址、监听指定的 HTTP 端口、指定支持的机型列表等等。

- 不改变代码而连接不同环境，如测试环境，开发环境
- 提高发布效率和应用程序稳定性，通过指定配置，而不是修改代码来改变应用的行为
- 安全，通过配置的方式存在配置文件中，而不是硬编码

---
### 程序读取配置的途径
- 命令行选项（option）：选项参数，通常以 `-` 或者 `--` 开头，包含 0 个或 1 个值，例如：`--out-format=json` 或者 `--help`；
    
- 命令行参数（argument）：非选项参数，命令行中除了 option，其余的部分都是 argument，如 `pip install click`；
    
- 配置文件：通常为 YAML、JSON、TOML、INI、XML 等格式的文本文件；
    
- 分布式配置存储服务：例如 Apollo、Etcd、Consul、Ncos 等。

**建议使用社区成熟的 Go 包来读取不同位置的配置**

---
#  应用业务逻辑处理
应用的业务逻辑根据业务的不同差别很大。

- 初始化缓存；
    
- 初始化并创建各类数据库客户端，例如：Redis、MySQL、Kafka、MongoDB、Etcd 等；
    
- 初始化并创建其他服务的客户端等；
    
- 初始化并启动Web服务，例如：HTTP、HTTPS、GRPC；
    
- 启动异步任务，这些异步任务可以执行任何业务需要的操作，例如：watch kube-apiserver、定期从第三方服务拉取数据，并缓存、注册 `/metrics` 并监听指定的端口、启动 kafka 消费队列等等；
    
- 执行特定的业务处理，并退出程序；
    
- 还有很多其他业务逻辑。

---
# 应用启动框架

启动框架可以理解为一个 main 函数，只不过这里的 main 函数是有代码结构的，并可能分散在多个 Go 源码文件中，在这个大函数中，你可以读取配置文件、初始化业务逻辑、启动 Web 服务等。